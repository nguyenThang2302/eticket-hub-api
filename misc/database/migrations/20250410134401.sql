-- Create "coupons" table
CREATE TABLE `coupons` (`id` varchar(16) NOT NULL COMMENT "Unique identifier for the coupon", `code` varchar(7) NOT NULL COMMENT "Unique code for the coupon", `percent` double NULL COMMENT "Discount percentage of the coupon", `amount` int NULL COMMENT "Discount amount of the coupon", `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT "Timestamp when the coupon was created", `updated_at` datetime NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT "Timestamp when the coupon was last updated", `deleted_at` datetime NULL COMMENT "Timestamp when the coupon was deleted", `created_by` varchar(16) NULL COMMENT "Identifier of the user who created the coupon", `updated_by` varchar(16) NULL COMMENT "Identifier of the user who last updated the coupon", `deleted_by` varchar(16) NULL COMMENT "Identifier of the user who deleted the coupon", PRIMARY KEY (`id`)) CHARSET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT "Table for storing coupon information";
-- Create "event_coupons" table
CREATE TABLE `event_coupons` (`id` varchar(16) NOT NULL COMMENT "Unique identifier for the event-coupon relationship", `event_id` varchar(16) NOT NULL COMMENT "Identifier of the event", `coupon_id` varchar(16) NOT NULL COMMENT "Identifier of the coupon", `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT "Timestamp when the relationship was created", `updated_at` datetime NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT "Timestamp when the relationship was last updated", `created_by` varchar(16) NULL COMMENT "Identifier of the user who created the relationship", `updated_by` varchar(16) NULL COMMENT "Identifier of the user who last updated the relationship", PRIMARY KEY (`id`), INDEX `fk_event_coupons_coupons` (`coupon_id`), INDEX `fk_event_coupons_events` (`event_id`), CONSTRAINT `fk_event_coupons_coupons` FOREIGN KEY (`coupon_id`) REFERENCES `coupons` (`id`) ON UPDATE CASCADE ON DELETE CASCADE, CONSTRAINT `fk_event_coupons_events` FOREIGN KEY (`event_id`) REFERENCES `events` (`id`) ON UPDATE CASCADE ON DELETE CASCADE) CHARSET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT "Table for associating events with coupons";
